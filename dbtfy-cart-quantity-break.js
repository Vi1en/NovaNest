customElements.get("dbtfy-cart-quantity-break")||customElements.define("dbtfy-cart-quantity-break",class extends HTMLElement{constructor(){super(),this.cartUpdateUnsubscriber=void 0,this.itemCount=Number(this.dataset.itemCount),this.breaks=this.querySelectorAll(".dbtfy-cart-quantity-break"),this.highestDiscount=this.querySelector(".dbtfy-cart-quantity-break__highest-discount"),this.data=Debutify.widgets["qty-breaks"]}connectedCallback(){this.breaks.length>0&&(this.renderBreak(this.itemCount),this.cartUpdateUnsubscriber=subscribe(PUB_SUB_EVENTS.cartUpdate,this.getCount.bind(this)))}disconnectedCallback(){this.cartUpdateUnsubscriber&&this.cartUpdateUnsubscriber()}getCount(cart){if(!cart)return;const html=cart.cartData.sections["cart-icon-bubble"],itemCount=new DOMParser().parseFromString(html,"text/html").querySelector(".cart-count-bubble").querySelector("span").textContent;this.renderBreak(Number(itemCount))}renderBreak(count){var message="";count>0&&(this.breaks.forEach(cartBreak=>{const text=this.data.text,range=Number(cartBreak.dataset.range),discount=cartBreak.dataset.discount.trim();if(range>count&&!message){const addToCount=range-count;message=text.replace("{count}",addToCount).replace("{discount}",discount)}}),message||(message=this.data.highest_discount_text)),setTimeout(()=>{document.querySelectorAll(".dbtfy-cart-break").forEach(content=>{content.querySelector("span").innerHTML=message})},ON_CHANGE_DEBOUNCE_TIMER)}});
//# sourceMappingURL=/s/files/1/0643/2004/5130/t/2/assets/dbtfy-cart-quantity-break.js.map?v=19622001420679339621744962460
