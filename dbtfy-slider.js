class DbtfySliderComponent extends HTMLElement{constructor(){if(super(),this.slider=this.querySelector('[id^="Slider-"]'),!this.slider)return;this.debug=this.dataset.debug==="true",this.currentPage=1,this.sliderItems=this.querySelectorAll('[id^="Slide-"]'),this.totalPages=0,this.currentPageElement=this.querySelector(".slider-counter--current"),this.pageTotalElement=this.querySelector(".slider-counter--total"),this.initPages(),new ResizeObserver(()=>{this.initPages(),this.connectedCallback()}).observe(this.slider),this.slider.addEventListener("scroll",this.update.bind(this)),this.autoPlay=this.dataset.autoplay==="true",this.autoplaySpeed=this.dataset.speed*1e3||5e3,this.loop=this.dataset.loop==="true",this.arrows=this.dataset.arrows==="true",this.dots=this.dataset.dots==="true",this.controlsPosition=this.dataset.controlsPosition||"bottom",this.controlsClass=this.dataset.controlsClass||"slider-buttons"}connectedCallback(){if(this.controlsPosition==="inside"){const controls=this.querySelector(`.${this.controlsClass}`);if(controls){controls.classList.contains("slideshow__controls--top")||(controls.style.position="relative");const height=this.querySelector(".slider-buttons").offsetHeight;let slider=this.querySelector(".slider"),sliderMarginBottom="0px";slider&&(sliderMarginBottom=window.getComputedStyle(slider).getPropertyValue("margin-bottom"));let item=this.querySelector(".grid__item"),itemPaddingBottom="0px";item&&(itemPaddingBottom=window.getComputedStyle(item).getPropertyValue("padding-bottom")),controls.style.marginTop="calc(0px - ("+height+"px + "+sliderMarginBottom+" + "+itemPaddingBottom+"))"}}this.autoPlay&&this.totalPages>1&&this.play(),this.arrows&&this.totalPages>1&&this.initializeArrows(),this.dots&&this.totalPages>1&&this.initializeDots()}update(){this.slider&&(this.currentPage=Math.round(this.slider.scrollLeft/this.sliderItemOffset)+1,this.dots&&this.handleDotState(),this.arrows&&!this.loop&&this.prevButton&&this.nextButton&&(this.currentPage===1?this.prevButton.setAttribute("disabled","true"):this.prevButton.removeAttribute("disabled"),this.currentPage===this.totalPages?this.nextButton.setAttribute("disabled","true"):this.nextButton.removeAttribute("disabled")))}handleDotState(){if(!this.dotsWrapper)return;this.dotsWrapper.querySelectorAll(".slider-counter__link--dots").forEach(dot=>{dot.classList.remove("slider-counter__link--active"),dot.getAttribute("data-slide")==this.currentPage&&dot.classList.add("slider-counter__link--active")})}initializeDots(){if(this.dotsWrapper=this.querySelector(".slideshow__control-wrapper"),!!this.dotsWrapper){this.dotsWrapper.innerHTML="";for(let i=1;i<=this.totalPages;i++){const dot=document.createElement("button");dot.classList.add("slider-counter__link","slider-counter__link--dots","link"),dot.setAttribute("data-slide",i),dot.setAttribute("aria-label","Slide "+i);const span=document.createElement("span");span.classList.add("dot"),dot.appendChild(span),dot.addEventListener("click",e=>{this.goToSlide(i)}),this.dotsWrapper.appendChild(dot)}this.dotsWrapper.parentElement.classList.remove("hidden"),this.handleDotState()}}initializeArrows(){this.arrowsSelector=this.dataset.arrowsSelector|"common",this.nextSelector=this.dataset.nextSelector,this.prevSelector=this.dataset.prevSelector,this.nextSelector&&this.prevSelector&&this.arrowsSelector==="custom"?(this.prevButton=document.querySelector(this.prevSelector),this.nextButton=document.querySelector(this.nextSelector)):(this.prevButton=this.querySelector('button[name="previous"]'),this.nextButton=this.querySelector('button[name="next"]')),!(!this.prevButton||!this.nextButton)&&(this.prevButton.classList.remove("hidden"),this.nextButton.classList.remove("hidden"),this.prevButton&&this.prevButton.addEventListener("click",this.goToPreviousSlide.bind(this)),this.nextButton&&this.nextButton.addEventListener("click",this.goToNextSlide.bind(this)))}initPages(){this.sliderItemsToShow=Array.from(this.sliderItems).filter(element=>element.clientWidth>0),!(this.sliderItemsToShow.length<2)&&(this.sliderItemOffset=this.sliderItemsToShow[1].offsetLeft-this.sliderItemsToShow[0].offsetLeft,this.slidesPerPage=Math.floor((this.slider.clientWidth-this.sliderItemsToShow[0].offsetLeft)/this.sliderItemOffset),this.sliderItemsToShow[0].offsetLeft>0?this.totalPages=this.sliderItemsToShow.length-this.slidesPerPage+1:this.totalPages=this.sliderItemsToShow.length-this.slidesPerPage,this.update())}resetPages(){this.sliderItems=this.querySelectorAll('[id^="Slide-"]'),this.initPages()}setSlidePosition(position){this.slider.scrollTo({left:position})}play(){clearInterval(this.autoplay),this.autoplay=setInterval(this.goToNextSlide.bind(this),this.autoplaySpeed)}goToNextSlide(){if(this.currentPage===this.totalPages&&this.loop){this.goToSlide(1);return}this.goToSlide(this.currentPage+1)}goToPreviousSlide(){if(this.currentPage===1&&this.loop){this.goToSlide(this.totalPages);return}this.goToSlide(this.currentPage-1)}goToSlide(slideNumber){this.slideScrollPosition=(slideNumber-1)*this.sliderItemOffset,this.setSlidePosition(this.slideScrollPosition)}}customElements.define("dbtfy-slider-component",DbtfySliderComponent);
//# sourceMappingURL=/s/files/1/0643/2004/5130/t/2/assets/dbtfy-slider.js.map?v=37983107863611325661744962461
