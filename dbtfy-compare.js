customElements.get("dbtfy-compare-badge")||customElements.define("dbtfy-compare-badge",class extends HTMLElement{constructor(){super(),this.url=Debutify.removeLocalFromUrl(this.dataset.productUrl).split("?")[0],this.icon=this.querySelector("i"),this.checked=!1}connectedCallback(){subscribe(PUB_SUB_EVENTS.compareUpdate,({url,checked})=>{url===this.url&&(checked?this.active():this.inactive())}),Debutify.compare.includes(this.url)&&(this.active(),this.checked=!0),this.addEventListener("click",this.toggle)}toggle(){this.checked?(this.inactive(),Debutify.compare=Debutify.compare.filter(url=>url!==this.url)):(this.active(),Debutify.compare.push(this.url)),localStorage.setItem("dbtfy-compare",JSON.stringify(Debutify.compare)),publish(PUB_SUB_EVENTS.compareUpdate,{url:this.url,checked:this.checked})}active(){this.classList.add("active"),this.checked=!0}inactive(){this.classList.remove("active"),this.checked=!1}}),customElements.get("dbtfy-compare-drawer")||customElements.define("dbtfy-compare-drawer",class extends HTMLElement{constructor(){super(),this.items=[],this.compareItems=this.dataset.compareItems.split(",")||[],this.titleSelector=this.querySelector('.dbtfy-compare-table__row[data-type="title"]'),this.priceSelector=this.querySelector('.dbtfy-compare-table__row[data-type="price"]'),this.imageSelector=this.querySelector('.dbtfy-compare-table__row[data-type="image"]'),this.typeSelector=this.querySelector('.dbtfy-compare-table__row[data-type="type"]'),this.vendorSelector=this.querySelector('.dbtfy-compare-table__row[data-type="vendor"]'),this.collectionsSelector=this.querySelector('.dbtfy-compare-table__row[data-type="collections"]'),this.tagsSelector=this.querySelector('.dbtfy-compare-table__row[data-type="tags"]'),this.shortDescriptionSelector=this.querySelector('.dbtfy-compare-table__row[data-type="short-description"]'),this.testMode=Shopify.designMode,this.heading=this.querySelector(".dbtfy-drawer__heading")}disconnectedCallback(){this.testMode&&(this.deselectEvent(),this.selectEvent())}connectedCallback(){this.testMode&&(this.deselectEvent=subscribe(PUB_SUB_EVENTS.shopifyEventSectionSelect,e=>{e.detail.sectionId==="dbtfy-compare-drawer"&&this.parentElement.open()}),this.selectEvent=subscribe(PUB_SUB_EVENTS.shopifyEventSectionDeselect,e=>{e.detail.sectionId==="dbtfy-compare-drawer"&&this.parentElement.close()})),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".header__icon--compare").forEach(icon=>{icon.addEventListener("click",e=>{e.preventDefault(),this.parentElement.open()})})}),this.init(),subscribe(PUB_SUB_EVENTS.compareUpdate,async({url,checked})=>{checked?await this.addItem(url):this.removeItem(url)})}init(){const fetchPromises=Debutify.compare.map(async url=>{await this.fetchItem(url)});Promise.all(fetchPromises).then(()=>{this.updateDrawer()})}updateDrawer(){this.drawer_title=this.heading?.attributes["data-heading"].value,this.items.length==0?this.classList.add("dbtfy-compare-drawer--empty"):this.items.length>0&&this.classList.remove("dbtfy-compare-drawer--empty"),this.draweCount();const elements={title:{selector:this.titleSelector,label:"Title",content:json=>{const a=document.createElement("a");return a.href="/products/"+json.product.handle,a.innerHTML=json.product.title,a}},price:{selector:this.priceSelector,label:"Price",content:json=>json.product.price},image:{selector:this.imageSelector,label:"Image",content:json=>{const div=document.createElement("div");div.classList.add("dbtfy-compare-table__image");const a=document.createElement("a");a.href="/products/"+json.product.handle;const img=document.createElement("img");return img.src=json.product.featured_image,img.alt=json.product.title,a.appendChild(img),div.appendChild(a),div.innerHTML+=json.remove_compare_html,div}},type:{selector:this.typeSelector,label:"Type",content:json=>json.product.type||"N/A"},vendor:{selector:this.vendorSelector,label:"Vendor",content:json=>json.product.vendor||"N/A"},collections:{selector:this.collectionsSelector,label:"Collections",content:json=>json.collections.map(c=>{const a=document.createElement("a");return a.href="/collections/"+c.handle,a.textContent=c.title,a.outerHTML}).join(", ")},tags:{selector:this.tagsSelector,label:"Tags",content:json=>json.product.tags||"N/A"},"short-description":{selector:this.shortDescriptionSelector,label:"Short Description",content:json=>json.product.description}};Object.values(elements).forEach(element=>element.selector.innerHTML=""),this.compareItems.forEach(item=>{const element=elements[item];if(!element)return;const th=document.createElement("th");th.classList.add("dbtfy-compare-table__sticky-col","dbtfy-compare-table__th"),th.innerHTML=element.label,element.selector.appendChild(th),this.items.forEach(({json})=>{const td=document.createElement("td");td.classList.add("dbtfy-compare-table__td");const content=element.content(json);content instanceof Node?td.appendChild(content):td.innerHTML=content,element.selector.appendChild(td)})})}draweCount(){this.drawer_title&&this.drawer_title.includes("count")&&(this.heading.innerHTML=this.drawer_title.replaceAll("{count}",this.items.length))}removeItem(url){this.items=this.items.filter(item=>item.url!==url),Debutify.compare=Debutify.compare.filter(url2=>url2!==this.url),this.updateDrawer()}async addItem(url){await this.fetchItem(url),this.updateDrawer()}async fetchItem(url){try{let data=await Debutify.fetchProductMarkup(`${url}?view=internal-compare`);if(data)this.items.push({url,json:JSON.parse(data)});else return this.removeItem(url),null}catch(error){return console.error("Error: "+error),null}}}),customElements.get("dbtfy-quick-compare-count")||customElements.define("dbtfy-quick-compare-count",class extends HTMLElement{constructor(){super()}connectedCallback(){this.quickCompareBubblecount(),subscribe(PUB_SUB_EVENTS.compareUpdate,()=>{this.quickCompareBubblecount()})}quickCompareBubblecount(){this.querySelector("span")&&(this.querySelector("span").innerHTML=Debutify.compare.length)}}),customElements.get("dbtfy-quick-compare")||customElements.define("dbtfy-quick-compare",class extends HTMLElement{constructor(){super(),this.items=[],this.compareItems=this.dataset.compareItems.split(",")||[],this.titleSelector=this.querySelector('.dbtfy-compare-table__row[data-type="title"]'),this.priceSelector=this.querySelector('.dbtfy-compare-table__row[data-type="price"]'),this.imageSelector=this.querySelector('.dbtfy-compare-table__row[data-type="image"]'),this.typeSelector=this.querySelector('.dbtfy-compare-table__row[data-type="type"]'),this.vendorSelector=this.querySelector('.dbtfy-compare-table__row[data-type="vendor"]'),this.collectionsSelector=this.querySelector('.dbtfy-compare-table__row[data-type="collections"]'),this.tagsSelector=this.querySelector('.dbtfy-compare-table__row[data-type="tags"]'),this.shortDescriptionSelector=this.querySelector('.dbtfy-compare-table__row[data-type="short-description"]')}connectedCallback(){this.init(),subscribe(PUB_SUB_EVENTS.compareUpdate,async({url,checked})=>{this.updateComaprelistCount(),checked?await this.addItem(url):this.removeItem(url)})}init(){this.updateComaprelistCount();const fetchPromises=Debutify.compare.map(async url=>{await this.fetchItem(url)});Promise.all(fetchPromises).then(()=>{this.updateCompareSection()})}updateComaprelistCount(){Debutify.compare.length>0?this.classList.contains("dbtfy-compare--has-items-empty")&&this.classList.remove("dbtfy-compare--has-items-empty"):this.classList.add("dbtfy-compare--has-items-empty")}updateCompareSection(){const elements={title:{selector:this.titleSelector,label:"Title",content:json=>{const a=document.createElement("a");return a.href="/products/"+json.product.handle,a.innerHTML=json.product.title,a}},price:{selector:this.priceSelector,label:"Price",content:json=>json.product.price},image:{selector:this.imageSelector,label:"Image",content:json=>{const a=document.createElement("a");a.href="/products/"+json.product.handle;const img=document.createElement("img");return img.src=json.product.featured_image,img.alt=json.product.title,a.appendChild(img),a}},type:{selector:this.typeSelector,label:"Type",content:json=>json.product.type},vendor:{selector:this.vendorSelector,label:"Vendor",content:json=>json.product.vendor},collections:{selector:this.collectionsSelector,label:"Collections",content:json=>json.collections.map(c=>{const a=document.createElement("a");return a.href="/collections/"+c.handle,a.textContent=c.title,a.outerHTML}).join(", ")},tags:{selector:this.tagsSelector,label:"Tags",content:json=>json.product.tags},"short-description":{selector:this.shortDescriptionSelector,label:"Short Description",content:json=>json.product.description}};Object.values(elements).forEach(element=>element.selector.innerHTML=""),this.compareItems.forEach(item=>{const element=elements[item];if(!element)return;const th=document.createElement("th");th.classList.add("dbtfy-compare-table__sticky-col","dbtfy-compare-table__th"),th.innerHTML=element.label,element.selector.appendChild(th),this.items.forEach(({json})=>{const td=document.createElement("td");td.classList.add("dbtfy-compare-table__td");const content=element.content(json);content instanceof Node?td.appendChild(content):td.innerHTML=content,element.selector.appendChild(td)})})}removeItem(url){this.items=this.items.filter(item=>item.url!==url),this.updateCompareSection()}async addItem(url){await this.fetchItem(url),this.updateCompareSection()}async fetchItem(url){try{let data=await Debutify.fetchProductMarkup(`${url}?view=internal-compare`);if(data)this.items.push({url,json:JSON.parse(data)});else return null}catch(error){return console.error("Error: "+error),null}}});
//# sourceMappingURL=/s/files/1/0643/2004/5130/t/2/assets/dbtfy-compare.js.map?v=162591750276473959401744962460
