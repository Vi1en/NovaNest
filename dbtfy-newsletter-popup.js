customElements.get("dbtfy-newsletter-popup-sidebar")||customElements.define("dbtfy-newsletter-popup-sidebar",class extends HTMLElement{constructor(){super(),this.sideBar=this.querySelector(".dbtfy-newsletter-popup-sidebar"),this.sideBarButton=this.querySelector(".dbtfy-newsletter-popup-sidebar button"),this.selector=this.dataset.selector,this.modalWidth=this.dataset.modalWidth,this.activateModal=this.dataset.activateModal,this.time=this.dataset.time*1e3,this.scroll=this.dataset.scrollWidth,this.closeButtonSelector=this.dataset.closeButtonSelector,this.copyButtonSelector=this.dataset.copyButtonSelector,this.copyButtonValue=this.dataset.copyButtonValue,this.sidebarEnabled=this.dataset.sidebarEnabled,this.close_icon_hide=this.dataset.closeIconHide}connectedCallback(){this.designMode=Shopify.designMode,this.closeMethods=["overlay","button","escape"],window.matchMedia("(max-width: 540px)").matches&&this.close_icon_hide==="false"&&(this.closeMethods=["overlay","escape"]),document.addEventListener("DOMContentLoaded",()=>{this.modal=new Debutify.modal({closeMethods:this.closeMethods,size:this.modalWidth,closeIcon:"close",selector:"dbtfy-newsletter-popup",boxClass:[],overlayClass:["dbtfy-newsletter-popup-overlay"],onOpen:function(){},onClose:function(){}})}),this.designMode||this.storageValue()}storageValue(){setTimeout(()=>{localStorage.getItem("dbtfyNewsletterPopup")==="true"?this.modal?.close():this.activateModal==="after_x_sec"?this.timeStart():this.activateModal==="scroll_depth"?this.windowScroll():this.activateModal==="leaving_store"?this.exitIntentTrigger():this.activateModal==="page_load"&&this.modal.open(),this.sidebarEnabled&&this.newsletterSidebar(),this.copyButton(),this.closeButtonEvent()},500)}closeButtonEvent(){const closeButton=this.modal.modalBox.querySelector(this.closeButtonSelector);closeButton&&(closeButton.onclick=()=>{this.modal.close(),localStorage.setItem("dbtfyNewsletterPopup","true")})}exitIntentTrigger(){document.addEventListener("mouseleave",e=>{e.clientY<=0&&localStorage.getItem("dbtfyNewsletterPopup")!=="true"&&this.modal.open()})}newsletterSidebar(){this.sideBarButton?.addEventListener("click",e=>{this.modal.open()})}copyButton(){if(this.copyButtonValue){const closeButtonSelector=this.modal.modalBox.querySelector(this.copyButtonSelector);closeButtonSelector&&(closeButtonSelector.onclick=()=>{navigator.clipboard.writeText(this.copyButtonValue),this.modal.close()})}}windowScroll(){let hasScrolled=!1;window.addEventListener("scroll",()=>{if(!hasScrolled){const scrollHeight=document.documentElement.scrollHeight||document.body.scrollHeight,scrollTop=document.documentElement.scrollTop||document.body.scrollTop,clientHeight=document.documentElement.clientHeight||document.body.clientHeight;scrollTop/(scrollHeight-clientHeight)*100>this.scroll&&(this.modal.open(),hasScrolled=!0)}})}timeStart(){setTimeout(()=>{this.modal.open()},this.time)}});
//# sourceMappingURL=/s/files/1/0643/2004/5130/t/2/assets/dbtfy-newsletter-popup.js.map?v=163773304427508421711744962460
